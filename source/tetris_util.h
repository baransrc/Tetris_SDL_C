#ifndef TETRIS_UTIL_H
#define TETRIS_UTIL_H

typedef unsigned char uint8_t;

#define LEVEL_COUNT 30

typedef struct Color {
	uint8_t r;
	uint8_t g;
	uint8_t b;
	uint8_t a; 
} Color;


const Color EMPTY_CELL_COLOR = {.r = 0x16, .g = 0x16, .b = 0x16, .a = 0xff};
const Color LINE_COLOR = {.r = 0xdb, .g = 0xdb, .b = 0xdb, .a = 0xff};
const Color TRANSPARENT_COLOR = {.r = 0xff, .g = 0xff, .b = 0xff, .a = 0x00};

// Colors By Tetromino Type:
// Color 0 is light, 1 is mid, 2 is dark.
const Color COLORS [7 /*type*/][3] =
{
// I
	{
		{.r = 0xFB, .g = 0x80, .b = 0x80, .a = 0xff},
		{.r = 0xF6, .g = 0x00, .b = 0x00, .a = 0xff},
		{.r = 0x7B, .g = 0x00, .b = 0x00, .a = 0xff},
	},
// O
	{
		{.r = 0xFF, .g = 0xC6, .b = 0x80, .a = 0xff},
		{.r = 0xFF, .g = 0x8C, .b = 0x00, .a = 0xff},
		{.r = 0x80, .g = 0x46, .b = 0x00, .a = 0xff},
	},
// T
	{
		{.r = 0xFF, .g = 0xFC, .b = 0xCC, .a = 0xff},
		{.r = 0xF2, .g = 0xE3, .b = 0x0D, .a = 0xff},
		{.r = 0x99, .g = 0x8F, .b = 0x00, .a = 0xff},
	},
// J
	{
		{.r = 0xA6, .g = 0xF4, .b = 0xA6, .a = 0xff},
		{.r = 0x4D, .g = 0xE9, .b = 0x4C, .a = 0xff},
		{.r = 0x27, .g = 0x75, .b = 0x26, .a = 0xff},
	},
// L
	{
		{.r = 0x9B, .g = 0xC1, .b = 0xFF, .a = 0xff},
		{.r = 0x37, .g = 0x83, .b = 0xFF, .a = 0xff},
		{.r = 0x1C, .g = 0x42, .b = 0x80, .a = 0xff},
	},
// S
	{
		{.r = 0xA4, .g = 0x8A, .b = 0xD5, .a = 0xff},
		{.r = 0x48, .g = 0x15, .b = 0xAA, .a = 0xff},
		{.r = 0x24, .g = 0x0B, .b = 0x55, .a = 0xff},
	},
// Z
	{
		{.r = 0xFF, .g = 0x80, .b = 0xB0, .a = 0xff},
		{.r = 0xFF, .g = 0x00, .b = 0x61, .a = 0xff},
		{.r = 0x80, .g = 0x00, .b = 0x31, .a = 0xff},
	},		
};

// Tetromino definitions:
const uint8_t TETROMINOES [7 /*type*/ ][4 /*rotation*/ ][5/*column*/ ][5 /*row*/ ] =
{
// I
	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 1, 1, 1, 1},
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0}, 
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{1, 1, 1, 1, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
		}
	},
// O
	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0}
		}
	},

// T
	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 1, 1, 1, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 1, 1, 1, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
		}
	},

// J
	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 1, 0, 0, 0},
			{0, 1, 1, 1, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 1, 1, 1, 0},
			{0, 0, 0, 1, 0},
			{0, 0, 0, 0, 0}
		}
	},

// L
  	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0}
		},
   		{
    		{0, 0, 0, 0, 0},
    		{0, 0, 0, 0, 0},
    		{0, 1, 1, 1, 0},
    		{0, 1, 0, 0, 0},
    		{0, 0, 0, 0, 0}
    	},
   		{
    		{0, 0, 0, 0, 0},
    		{0, 1, 1, 0, 0},
    		{0, 0, 1, 0, 0},
    		{0, 0, 1, 0, 0},
    		{0, 0, 0, 0, 0}
    	},
   		{
    		{0, 0, 0, 0, 0},
    		{0, 0, 0, 1, 0},
    		{0, 1, 1, 1, 0},
    		{0, 0, 0, 0, 0},
    		{0, 0, 0, 0, 0}
    	}
   	},

// S
	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 1, 0, 0, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0}
		},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 1, 0},
			{0, 0, 0, 0, 0}
		}
	},

// Z
	{
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0}
		},
		{		
			{0, 0, 0, 0, 0},
			{0, 0, 1, 0, 0},
			{0, 1, 1, 0, 0},
			{0, 1, 0, 0, 0},
			{0, 0, 0, 0, 0}
    	},
  		{
			{0, 0, 0, 0, 0},
			{0, 1, 1, 0, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0}
    	},
		{
			{0, 0, 0, 0, 0},
			{0, 0, 0, 1, 0},
			{0, 0, 1, 1, 0},
			{0, 0, 1, 0, 0},
			{0, 0, 0, 0, 0}
   		}
   	}
};

const double FALL_TIME_IN_SECS[LEVEL_COUNT] = {
	0.8,
	0.72, 
	0.635,
	0.55,
	0.47,
	0.385,
	0.3,
	0.22,
	0.135,
	0.1,
	0.085,
	0.085,
	0.085,
	0.07,
	0.07,
	0.07,
	0.05,
	0.05,
	0.05,
	0.035,
	0.035,
	0.035,
	0.035,
	0.035,
	0.035,
	0.035,
	0.035,
	0.035,
	0.035,
	0.02
};

#endif
